var LazyLoad=new Class({Implements:[Options,Events],options:{range:200,elements:"img",container:window,mode:"vertical",realSrcAttribute:"data-src",useFade:!0},initialize:function(a){this.setOptions(a),this.container=document.id(this.options.container),this.elements=document.id(this.container==window?document.body:this.container).getElements(this.options.elements),this.largestPosition=0;var b="vertical"==this.options.mode?"y":"x",c=this.container!=document.body&&this.container!=document.body?this.container:"";this.elements=this.elements.filter(function(a){this.options.useFade&&a.setStyle("opacity",0);var d=a.getPosition(c)[b];return d<this.container.getSize()[b]+this.options.range?(this.loadImage(a),!1):!0},this);var d=function(a){var e=this.container.getScroll()[b];e>this.largestPosition&&(this.elements=this.elements.filter(function(a){return e+this.options.range+this.container.getSize()[b]>=a.getPosition(c)[b]?(this.loadImage(a),!1):!0},this),this.largestPosition=e),this.fireEvent("scroll"),this.elements.length||(this.container.removeEvent("scroll",d),this.fireEvent("complete"))}.bind(this);this.container.addEvent("scroll",d)},loadImage:function(a){this.options.useFade&&a.addEvent("load",function(){a.fade(1)}),a.set("src",a.get(this.options.realSrcAttribute)),this.fireEvent("load",[a])}});