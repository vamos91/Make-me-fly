




    
        function PeeriusWrap(a,b){this.w=a;this.e=b}var Peerius={rId:-1,scriptId:"23052425",ign:{},pp:{},excTxt:false,start:0,serverUrl:"https://superdry.peerius.com/tracker",trackingUrl:"TO BE DEFINED DYNAMICALLY",httpsServerUrl:"https://superdry.peerius.com/tracker",fixXml:function(a){a=a.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;");return a},browser:function(){var a=navigator.userAgent.toLowerCase();if(a.indexOf("opera")!=-1){return"Opera"}if(a.indexOf("firefox")!=-1){return"Firefox"}if(a.indexOf("safari")!=-1){return"Safari"}if(a.indexOf("msie")!=-1){return"msie"}},isIE8:function(){return window.XDomainRequest?true:false},log:function(a){var c="false";if(c=="true"){var b=document.createElement("p");b.innerHTML=new Date()+" : "+a;document.body.appendChild(b)}},shallIgnore:function(b,e){if(e){var j=this.getAttr(b,e);if(typeof j!="string"){j=""}return !(!this.ign["@"+e]&&!this.ign["@"+e+"="+j])}var m=b.tagName.toLowerCase();if(this.ign[m]){return"ign"}if(this.ign["-"+m]){return"deepign"}for(var d=0;d<this.attrs.length;d++){var e=this.attrs[d];var j=this.getAttr(b,e);if(typeof j!="string"){j=""}var f=m+"[@"+e+"="+j+"]";if(this.ign["-"+f]){return"deepign"}if(this.ign[f]){return"ign"}}var l=b.parentNode;if(l){var h=0;for(var d=0;d<l.childNodes.length;d++){var g=l.childNodes[d];if(g==b){if(this.ign[m+"["+h+"]"]){return"ign"}if(this.ign["-"+m+"["+h+"]"]){return"deepign"}}if(g.nodeType==1){h++}}var k=l.tagName.toLowerCase();if(k=="tbody"||k=="table"){if(m!="tr"&&m!="thead"&&m!="tbody"&&m!="tfoot"){return"deepign"}}}return"inc"},getAttr:function(d,b){var c=d.getAttribute(b);if(this.browser()=="msie"){if(b=="class"){c=d.getAttribute("className");if(!c){c=d.getAttribute("class")}}else{if(b=="selected"){c=d.selected;return c?"selected":null}}}if(b=="value"&&d.tagName=="INPUT"){if(d.value){c=d.value}}if(b=="selected"&&c!=null){c="selected"}return c},attrs:new Array("id","class","value","name","href","src","content","selected","title"),toXml:function(d){if(d.constructor==PeeriusWrap){return"<"+d.w+">"+this.toXml(d.e)+"</"+d.w+">"}else{if(d.constructor==Array){var f="";for(var g=0;g<d.length;g++){f+=this.toXml(d[g])}return f}else{if(d.constructor==String){return d}else{switch(d.nodeType){case 1:var h="";var e=this.shallIgnore(d);var l=d.tagName;var c=(e=="inc"&&l!="");if(c){if(l.charAt(0)=="/"){l=l.substring(1)}h+="<"+l;for(var g=0;g<this.attrs.length;g++){var j=this.attrs[g];var k=this.getAttr(d,j);if(k&&!this.shallIgnore(d,j)){h+=" "+j+'="'+this.fixXml(k)+'"'}}h+=">"}if(e!="deepign"){var b=d.childNodes;for(var g=0;g<b.length;g++){h+=this.toXml(b[g])}}if(c){h+="</"+l+">"}return h;case 3:if(this.excTxt){return""}return this.fixXml(d.nodeValue)}}}}return""},getNth:function(b,c){var a=document.getElementsByTagName(b);return a[c]},isArray:function(a){return a.constructor==Array},exists:function(c){try{var b=this.expr(c);if(b!=null){if(this.isArray(b)){return b.length>0}}return b!=null}catch(a){return false}},expr:function(c,h){try{var H=c.split("/");var F=h?h:document.body;var G=document;for(var C=0;C<H.length;C++){var t=H[C];if(F.tagName=="IFRAME"){if(F.contentDocument){F=F.contentDocument}else{F=F.contentWindow.document}G=F;F=F.body}if(t=="html"){F=G.getElementsByTagName("html")[0]}else{if(t.charAt(0)=="$"||t.charAt(0)=="#"){F=G.getElementById(t.substring(1));if(F==null){return null}}else{if(t.charAt(0)=="."){var g=new Array();var f=t.substring(1);var w;if(f.charAt(0)=="["){w=new RegExp(f.substring(1,f.length-1),"i")}for(var y=0;y<F.childNodes.length;y++){var p=F.childNodes[y];if(p.className!=undefined){var m=p.className.split(" ");var v=false;for(var A=0;A<m.length;A++){var o=m[A];if((w&&w.test(o))||(!w&&o==f)){v=true;if(C==H.length-1){g[g.length]=p}else{var q=this.expr(H.slice(C+1).join("/"),p);if(q&&this.isArray(q)){for(var x=0;x<q.length;x++){g[g.length]=q[x]}}else{if(q){g[g.length]=q}}}}}if(!v){var q=this.expr(H.slice(C).join("/"),p);if(this.isArray(q)){for(var x=0;x<q.length;x++){g[g.length]=q[x]}}else{g[g.length]=q}}}}return g}else{if(t.charAt(0)=="@"){var H=t.substring(1,t.length);return"<attr>"+this.getAttr(F,H)+"</attr>"}else{if(t.charAt(0)=="|"){var B=c.substring(1,c.length-1).split("#");var g=new Array();for(var A=0;A<B.length;A++){var u=this.expr(B[A],F);if(this.isArray(u)){for(var x=0;x<u.length;x++){g[g.length]=u[x]}}else{g[g.length]=u}}return new PeeriusWrap("_",g)}else{var B=t.split("[");var b=B[0].toUpperCase();var E=(B.length==2);var n=E?parseInt(B[1].substring(0,B[1].length-1)):null;if(b.length==0){F=F.childNodes[n]}else{if(typeof n=="number"){var g=F.childNodes;F=null;var y=0;for(var A=0;A<g.length;A++){if(g[A].tagName==b){if(n==y){F=g[A]}y++}}}else{var g=new Array();for(var y=0;y<F.childNodes.length;y++){var p=F.childNodes[y];if(p.tagName==b){g[g.length]=p}}if(C==H.length-1){return g}var u=new Array();for(var y=0;y<g.length;y++){var p=g[y];var q=this.expr(H.slice(C+1).join("/"),p);if(this.isArray(q)){for(var x=0;x<q.length;x++){u[u.length]=q[x]}}else{u[u.length]=q}}return u}}}}}}}}return F}catch(D){throw"error evaluating "+c+" : "+D}},eToMsg:function(b,f){var a="";if(typeof f.tagName=="undefined"){for(var c=0;c<f.length;c++){if(f[c].constructor==String){a+=f[c]}else{a+=Peerius.toXml(f[c])}}}else{var d=this.toXml(f);if(d==""){throw b+" returned empty string"}a+=d}return a},esc:function(a){return encodeURIComponent(a)},encode64:function(d){var b="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789@#=";var a=[];var l,j,g;var k,h,f,e;var c=0;while(c<d.length){l=d.charCodeAt(c++);j=d.charCodeAt(c++);g=d.charCodeAt(c++);k=l>>2;h=((l&3)<<4)|(j>>4);f=((j&15)<<2)|(g>>6);e=g&63;if(isNaN(j)){f=e=64}else{if(isNaN(g)){e=64}}a.push(b.charAt(k)+b.charAt(h)+b.charAt(f)+b.charAt(e))}return a.join("")},paramForNextReq:function(a,b){this.cCookie("peerius_pass_"+a,b,30)},send:function(b,g,e){var r=Peerius.sessionId,o=this.rCookie("peerius_user"),k="method="+b+"&pageReferrer="+this.esc(document.referrer);k+=(r?"&sessionId="+r:"")+(o?"&user="+this.esc(o):"")+"&msg="+this.esc(g).replace(/(%20)+/g,"%20").replace(/(%09)+/g,"%09")+"&rid="+this.rId;k+="&ref="+this.esc(document.location);var v=Peerius.rCookie("viewedPeeriusPopUpModal");if(v!=null){this.pp.viewedPopup=v}var s=this.location();if(s){k+="&loc="+s}for(var f in this.pp){k+="&params['"+f+"']="+this.esc(this.pp[f])}this.allCookies(function(i,c){if(i.indexOf("peerius_pass_")!=-1){k+="&params['"+i.substring(i.indexOf("peerius_pass_")+13,i.length)+"']="+Peerius.esc(c);Peerius.cCookie(i,-1,-1)}else{if(i.indexOf("peerius_stat_")==0){k+="&params['"+i.substring(13,i.length)+"']="+Peerius.esc(c)}}});var a=Peerius.browser()=="msie"?1900:5000;if(typeof peeriusMaxGETSize!="undefined"){a=peeriusMaxGETSize}k=this.encode64(k);var y=new Date().getTime(),q=0,w=1,j=k.length,d=Math.floor(j/a)+1;while(q<j){var h=k.slice(q,q+a),x=e+"?p="+d+"&c="+w+"&i="+y+"_"+this.scriptId+"&m="+h;this.runScript(x,null,true);q+=a;w++}},msgHandlers:new Array(),sendMsg:function(d,b,c){var a=this.msgHandlers.length;this.msgHandlers[a]=c;this.pp.handlerId=a;this.send(d,b,this.trackingUrl)},location:function(){var a=document.getElementsByTagName("html")[0].getAttribute("lang");if(a!=undefined){return a.replace(/[^a-zA-Z0-9\-_ ]/g,"")}return a},runScript:function(b,d,c){var a=document.createElement("script");a.charset="UTF-8";if(d){a.id=d}a.type="text/javascript";if(!c){b+="&ref="+this.esc(document.location)}a.src=b;document.getElementsByTagName("head")[0].appendChild(a)},onload:function(a){var b=window.onload;if(typeof window.onload!="function"){window.onload=a}else{window.onload=function(){try{a()}catch(c){}if(b){try{b()}catch(c){}}}}},getCookiePostfix:function(){var b="";var a="";if(a!=null&&a!="null"){b=a}return b},cCookie:function(a,g,e){if(e){var d=new Date();d.setTime(d.getTime()+(e*1000));var c="; expires="+d.toGMTString()}else{var c=""}var f="/";var h=this.getCookiePostfix();var b="/";if(b!=null&&b!="null"){f=b}var i=""+a+h+"="+g+c+"; path="+f+"";document.cookie=i},rCookie:function(b){var e=this.getCookiePostfix();var f=""+b+e+"=";var a=document.cookie.split(";");for(var d=0;d<a.length;d++){var g=a[d];while(g.charAt(0)==" "){g=g.substring(1,g.length)}if(g.indexOf(f)==0){return g.substring(f.length,g.length)}}return null},allCookies:function(g){var b=document.cookie.split(";");for(var e=0;e<b.length;e++){var j=b[e];while(j.charAt(0)==" "){j=j.substring(1,j.length)}var a=j.indexOf("=");var h=j.substring(0,a);var d=j.substring(a+1,j.length);g(h,d)}},recsMap:null,fixUrls:function(h,b,g){for(var f=0;f<h.childNodes.length;f++){var c=h.childNodes[f];if(c.nodeName=="A"&&c.href){var a=decodeURIComponent(c.href);var j=a.indexOf("ignore:");if(j!=0){if(a.indexOf("prevpage:")==0){c.href="javascript:Peerius.prevPage("+a.substring(9)+","+g+")"}else{if(a.indexOf("nextpage:")==0){c.href="javascript:Peerius.nextPage("+a.substring(9)+","+g+")"}else{if(a.indexOf("markclick:")==0){c.href=a.substring(10);c.onclick=function(){Peerius.markClick(a);return true}}else{var k=this.findRid(a);var d=c.href;c.onmouseup=function(i){if(i.which!=3){Peerius.cCookie("peerius_rid",k,1200);return true}}}}}}else{c.href=c.href.substring(7)}}this.fixUrls(c,b,g)}},clickErr:function(b){var c="";for(var a in this.recsMap){c+=a+" - "+this.recsMap[a]+"\n"}throw"fixUrls: rid not found for "+b+"\nrecsMap="+c},findRid:function(b){var a=b.indexOf("//");if(a==-1){throw"findRid: cant find //"}a=b.indexOf("/",a+2);b=b.substring(a);var c=this.recsMap[b];if(!c){this.clickErr(b)}return c},extractRid:function(a){if(typeof a=="number"){return a}return this.findRid(a)},markClick:function(a){if(this.isOptIn()){var b=this.extractRid(a);Peerius.cCookie("peerius_rid",b,1200);return b}},sendClick:function(a){if(this.isOptIn()){var b=this.extractRid(a);this.runScript(this.serverUrl+"/sendClick.page?rId="+b+"&sessionId="+this.esc(this.getSessionId()));Peerius.cCookie("peerius_rid",-1)}},getRecs:function(a){Peerius.send("error","getRecs should be defined dynamically",this.trackingUrl)},recExprs:function(b){var a=b.split(",");for(var c=0;c<a.length;c++){try{if(a[c]=="ignore"){return"ign"}var d=this.expr(a[c]);if(d){return d}}catch(d){}}throw"Invalid recs xpaths: "+b},getParam:function(b){b=b.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var a="[\\?&]"+b+"=([^&#]*)";var d=new RegExp(a);var c=d.exec(window.location.href);return c==null?null:c[1]},getSessionId:function(){var a=this.getParam("peeriusPGSid");if(a){return a}return Peerius.rCookie("peerius_sess")},dynamic:function(){var e=this.getSessionId();var a=Peerius.rCookie("peerius_user");var d=Peerius.rCookie("peerius_rid");Peerius.cCookie("peerius_rid",-1,1);var c=this.serverUrl+"/tracker.page?r="+new Date().getTime();if(e){Peerius.cCookie("peerius_sess",e,14400);c+="&sessionId="+this.esc(e)}if(a){c+="&userId="+this.esc(a)}if(d){c+="&rId="+d}var b=Peerius.rCookie("peerius_stat_optout");if(b){c+="&optout=1"}Peerius.cCookie("peerius_ct","t",2);if(!Peerius.rCookie("peerius_ct")){c+="&ct=0"}if(typeof(peeriusTrackerParams)!="undefined"){for(var f in peeriusTrackerParams){c+="&params['"+f+"']="+this.esc(peeriusTrackerParams[f])}}this.runScript(c,"peeriusScript")},carousel:function(c,b){var a=this.serverUrl+"/carousel.page?wId="+b+"&sessionId="+this.esc(this.sessionId)+"&start="+c;Peerius.runScript(a)},nextPage:function(a,b){this.start+=a;this.carousel(this.start,b)},prevPage:function(a,b){this.start-=a;this.carousel(this.start,b)},recommend:function(c){var a=this.serverUrl+"/extrarecs.page?sessionId="+this.esc(this.sessionId);for(var b=0;b<c.length;b++){a+="&w="+c[b]}Peerius.runScript(a)},inject:function(c,g,b){if(g=="REPLACE"){c.innerHTML=b;return c}else{if(g=="APPEND"){var f=document.createElement("div");f.innerHTML=b;c.appendChild(f);return f}else{if(g=="INSERT_BEFORE"){var f=document.createElement("div");f.innerHTML=b;c.parentNode.insertBefore(f,c);return f}else{if(g=="INSERT_AFTER"){var f=document.createElement("div");f.innerHTML=b;var a=c.nextSibling;while(a&&a.nodeType!=1){a=a.nextSibling}if(a){a.parentNode.insertBefore(f,a)}else{c.parentNode.appendChild(f)}return f}}}}},injectCss:function(a){var b=document.createElement("style");b.setAttribute("type","text/css");if(b.styleSheet){b.styleSheet.cssText=a}else{b.appendChild(document.createTextNode(a))}document.getElementsByTagName("head")[0].appendChild(b)},recommendCallbackBefore:function(a){},recommendCallbackAfter:function(a){},optout:function(){this.sendMsg("optout","");this.cCookie("peerius_stat_optout",1,630720000);this.cCookie("peerius_sess",-1,-1);this.cCookie("peerius_user",-1,-1)},optin:function(){this.cCookie("peerius_stat_optout",0,-1)},isOptIn:function(){return this.rCookie("peerius_stat_optout")==undefined},error:function(c,b){var a=c+" : "+b+"\n";if(b.lineNumber){a+="line:"+b.lineNumber+"\n"}if(b.description){a+="description: "+b.description+"\n"}a+="url: "+window.location.href+"\n";Peerius.send("error",a,this.trackingUrl)}};
    
    



    


Peerius.findForm=function(c,a){var b=c.parentNode;if(!b){throw"cant find form for xpath "+a}if(b.tagName=="FORM"){return b}return this.findForm(b,a)};function encodeURIUsingBrowserCapabilities(a){var b=document.createElement("div");b.appendChild(document.createTextNode(a));return encodeURI(b.innerHTML)}Peerius.installFormValueHandler=function(a,b){var d=this.expr(a);var c=function(){var e=encodeURIUsingBrowserCapabilities(d.value);if(typeof(e)=="string"&&e.length>0){Peerius.cCookie("peerius_pass_"+b,e,3600)}};if(d.addEventListener){d.addEventListener("change",c,false);d.addEventListener("blur",c,false)}else{if(d.attachEvent){d.attachEvent("onchange",c);d.attachEvent("onblur",c)}}setTimeout(c,500)};;
Peerius.callbacks=function(){var a=typeof PeeriusCallbacks=="undefined"?top.PeeriusCallbacks:PeeriusCallbacks;if(false){if(typeof a=="undefined"){alert("PeeriusCallbacks is not defined. document location:"+document.location)}}return a};Peerius.apiErrors=new Array();Peerius.sendAjax=function(i){var k;var b=function(){if(k.readyState==k.DONE){if(k.status!=200){Peerius.apiErrors.unshift({time:(new Date()).toString(),httpCode:k.status,msg:k.responseText})}}};if(window.XDomainRequest){k=new XDomainRequest();k.onload=function(){};k.onerror=function(){Peerius.apiErrors.unshift({time:(new Date()).toString(),httpCode:"N/A",msg:k.responseText})};k.onprogress=function(){}}else{if(window.XMLHttpRequest){k=new XMLHttpRequest();k.onreadystatechange=b}else{k=new ActiveXObject("Microsoft.XMLHTTP");k.onreadystatechange=b}}var e=Peerius.sessionId;if(e==null){e=this.rCookie("peerius_sess")}var c=this.rCookie("peerius_user");var j=c.toString().split(":")[1];var a=e==null?"new":e;var f=i.indexOf("?")!=-1?"&session="+encodeURIComponent(a):"?session="+encodeURIComponent(a);var g=c==null?"&cuid=new":"&cuid="+encodeURIComponent(j);var h=Peerius.httpsServerUrl+"/api/v1_2/"+i+f+g;if(i.indexOf("location")==-1&&(typeof PeeriusCallbacks!="undefined")){var d="&location="+PeeriusCallbacks.track.lang.trim();h=h+d}if(h.indexOf("/rest.pagex")!=-1){k.onreadystatechange=function(){if(k.readyState==4&&k.status==200){sendAjaxResponse(k.responseText)}}}k.open("get",h,true);k.send(null)};function sendAjaxResponse(b){var a=JSON.parse(b);if(shouldFireSmartRecs(a)){PeeriusCallbacks.smartRecs(a.smartRecs)}}function shouldFireSmartRecs(a){return typeof(PeeriusCallbacks.smartRecs)===typeof(Function)&&typeof(a.smartRecs)!=="undefined"&&a.smartRecs.length>0}Peerius.smartContentClick=function(a){Peerius.paramForNextReq("creativeclick",a);return true};Peerius.smartRecsClick=function(a){var b=parseInt(a);Peerius.markClick(b);return true};Peerius.smartRecsSendClick=function(a){var b=parseInt(a);Peerius.sendClick(b);return true};(function(){
	var t='<_di>'+'<json><![CDATA['+JSON.stringify(Peerius.callbacks().track)+']]></json></_di>'
	Peerius.extraXml=Peerius.extraXml?Peerius.extraXml+t:t
})()

Peerius.dynamic()