var JFormValidator=new Class({initialize:function(){this.handlers=Object(),this.custom=Object(),this.setHandler("username",function(e){return regex=new RegExp("[<|>|\"|'|%|;|(|)|&]","i"),!regex.test(e)}),this.setHandler("password",function(e){return regex=/^\S[\S ]{2,98}\S$/,regex.test(e)}),this.setHandler("numeric",function(e){return regex=/^(\d|-)?(\d|,)*\.?\d*$/,regex.test(e)}),this.setHandler("email",function(e){return regex=/^[a-zA-Z0-9.+_-]+@([a-zA-Z0-9.-]+\.)+[a-zA-Z0-9.-]{2,15}$/,regex.test(e)});var e=$$("form.form-validate");e.each(function(e){this.attachToForm(e)},this)},setHandler:function(e,t,n){n=""==n?!0:n,this.handlers[e]={enabled:n,exec:t}},attachToForm:function(e){$A(e.elements).each(function(e){e=$(e),"input"!=e.getTag()&&"button"!=e.getTag()||"submit"!=e.getProperty("type")?e.addEvent("blur",function(){return document.formvalidator.validate(this)}):e.hasClass("validate")&&(e.onclick=function(){return document.formvalidator.isValid(this.form)})})},validate:function(e){if($(e).hasClass("required")&&!$(e).getValue())return this.handleResponse(!1,e),!1;var t=e.className&&-1!=e.className.search(/validate-([a-zA-Z0-9\_\-]+)/)?e.className.match(/validate-([a-zA-Z0-9\_\-]+)/)[1]:"";return""==t?(this.handleResponse(!0,e),!0):t&&"none"!=t&&this.handlers[t]&&$(e).getValue()&&1!=this.handlers[t].exec($(e).getValue())?(this.handleResponse(!1,e),!1):(this.handleResponse(!0,e),!0)},isValid:function(e){for(var t=!0,n=0;n<e.elements.length;n++)0==this.validate(e.elements[n])&&(t=!1);return 0==t?t:t},handleResponse:function(e,t){if(!t.labelref){var n=$$("label");n.each(function(e){e.getProperty("for")==t.getProperty("id")&&(t.labelref=e)})}0==e?(t.addClass("invalid"),t.labelref&&$(t.labelref).addClass("invalid")):(t.removeClass("invalid"),t.labelref&&$(t.labelref).removeClass("invalid"))}});document.formvalidator=null,"1.11"==MooTools.version?Window.onDomReady(function(){document.formvalidator=new JFormValidator}):window.addEvent("domready",function(){document.formvalidator=new JFormValidator})