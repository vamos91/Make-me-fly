function updateviewbag(){var a=$("mbscroll-container-vertical");if(null!=a){var b=$("minibag_contents").getSize().size.y,c=262,d=b/c;d>1&&(a.setStyle("width","25px"),$("minibag").setStyle("margin-right","0px"),a.innerHTML='<div id="mbscroll-scroll-up"></div><div id="mbscroll" class="mbscroll-vert"><div id="mbscrollhandle" class="mbscrollhandle-vert"></div></div><div id="mbscroll-scroll-down"></div>',$("mbscrollhandle").setStyle("height",228/d),makeMBScrollbar($("minibag"),$("mbscroll"),$("mbscrollhandle"),!1))}}function minicart_remove(a,b){try{DataLayer360.removeFromBasket(b)}catch(c){}var d="index.php?option=com_virtuemart&Itemid=16&func=cartDelete&only_page=1&index="+a,e=function(){minicart_update(),getshoppingbag()},f={method:"post",onComplete:e};new Ajax(d,f).request()}function minicart_update(){var a=function(a){if(carts=$$(".vmCartModule"),carts)try{for(var b=0;b<carts.length;b++)carts[b].innerHTML=a}catch(c){}getshoppingbag()},b={method:"post",onComplete:a,data:{only_page:1,page:"shop.basket_short",option:"com_virtuemart"}};new Ajax("index2.php",b).request()}function getshoppingbag(){try{if("basket"!=DataLayer360.access("page.category")){var a="index.php?option=com_supergroupadmin&task=viewbag&format=raw";if(1!=$("minicartmouse").value||""==$("minicart_dropdown").innerHTML){var b=function(a){$("minicart_dropdown").innerHTML=a,$("minicartmouse").value=1,updateviewbag()},c={method:"get",onComplete:b,evalScripts:!0};new Ajax(a,c).request()}}else if("undefined"!=typeof DataLayer360.access("ecommerce.checkout.products.0.id")){var d=new ElementHandler,e=$("basket-container"),f=new BasketTotalUpdater(d),g=new ConfirmTooltipBuilder(new TooltipBuilder,shoppingbag_builder_language),h=new ShoppingBag(e,f,new BasketBuilder(e,DataLayer360.access("superdry.media"),!0),g);h.refreshbag()}else""==device_type&&window.location.reload()}catch(i){}$("minicart_dropdown").removeClass("hidden")}function makeMBScrollbar(a,b,c,d,e,f){function g(a){if("left"==a)for(var b=0;2>b;b++)i.set(i.step+3);else for(var b=0;2>b;b++)i.set(i.step-3);0!=k&&(l=setTimeout(function(){g(a)},1)),0!=j&&(l=setTimeout(function(){g(a)},1))}new Fx.Styles(a,{duration:1e3,wait:!1});if(null!=a&&null!=b&&null!=c){var h=d?a.getSize().scrollSize.x-a.getSize().size.x:a.getSize().scrollSize.y-a.getSize().size.y,i=new Slider(b,c,{steps:h,mode:d?"horizontal":"vertical",onChange:function(b){var c=d?b:0,e=d?0:b;a.scrollTo(c,e)}}).set(0);if(e||$$(a,b).addEvent("mousewheel",function(a){a=new Event(a).stop();var b=i.step-30*a.wheel;i.set(b)}),i.set(i.step+Number(f)),document.addEvent("keydown",function(a){switch(a.keyCode){case 37:i.set(i.step-249);break;case 39:i.set(i.step+249)}}),null==$("mbscroll-scrollleft"))$defined($("mbscroll-scroll-up"))&&$("mbscroll-scroll-up").addEvent("click",function(){i.set(i.step-50)}),$defined($("mbscroll-scroll-down"))&&$("mbscroll-scroll-down").addEvent("click",function(){i.set(i.step+50)});else{var j=!1,k=!1,l=0;$("mbscroll-scrollright").addEvent("mousedown",function(){0==j?(j=!0,g("left")):(clearTimeout(l),j=!1,k=!1)}).addEvent("mouseup",function(){j=!1,k=!1}),$("mbscroll-scrollleft").addEvent("mousedown",function(){0==k?(k=!0,g("right")):(clearTimeout(l),j=!1,k=!1)}).addEvent("mouseup",function(){j=!1,k=!1})}}}window.addEvent("domready",function(){var a=$("country-select");if(null!==a){var b=a.getElement(".selected-country"),c=function(){var a=$("country-select").getElement("div");a.setStyle("position","inherit"),a.setStyle("bottom","0px"),a.removeClass("shadow");var c=a.getElements("li");c.forEach(function(a){a.removeEvents(),a.setStyle("display","none"),a.removeClass("selected-country")}),b.setStyle("display","block"),b.addClass("selected-country")},d=function(){var a=$("country-select").getElement("div");a.setStyle("position","absolute"),a.setStyle("bottom","-100px"),a.addClass("shadow");var d=a.getElements("li");d.forEach(function(a){a.addEvent("mouseover",function(){a.addClass("hover")}),a.addEvent("mouseout",function(){a.removeClass("hover")}),a.addEvent("click",function(d){d.stopPropagation(),c(),a!=b&&(b=a,window.location.href=a.getProperty("data-url"))}),a.setStyle("display","block"),a.removeClass("selected-country")})};$("country-select").addEvent("click",function(a){a.stopPropagation(),d()}),document.addEvent("click",function(a){c()})}updateviewbag()}),window.addEvent("domready",function(){var a,b=$("shopping-bag");null!=b&&(b.hasClass("nodrop")||(b.addEvent("mouseenter",function(){getshoppingbag()}),b.addEvent("mouseover",function(){clearTimeout(a),$("minicart_dropdown").removeClass("hidden")}),b.addEvent("mouseleave",function(){a=setTimeout(function(){$("minicart_dropdown").addClass("hidden")},600)})))});