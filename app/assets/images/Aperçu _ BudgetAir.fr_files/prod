_stTracker.insertTags({"tags":[{"markerCondition":"[]","selector":"head","id":100,"version":70,"content":"(function() {\n\tvar dl = window.dataLayer;\n\t\n\tif(typeof dl == 'undefined'){\n\t\treturn;\n\t\t//throw 'window.dataLayer not defined, GTM not implemented.';\n\t}\n\t\n    var tempPushFunction = dl.push;\n\ttry {\n\t\tdl.push = function(dlEntry) {\n\t\t\tfor (var prop in dlEntry) {\n\t\t\t\tif (dlEntry.hasOwnProperty(prop)) {\n\t\t\t\t\tif (prop === 'event') {\n\t\t\t\t\t\t_st.event.publish('gtmEvent', dlEntry[prop], dlEntry);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t} else {\n\t\t\t\t\t\t_st.data.setProperty(prop, dlEntry[prop]);\n\t\t\t\t\t\t_st.debug.log(prop, dlEntry[prop]);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\ttempPushFunction(dlEntry);\n\t\t};\n\t} catch(e) {\n\t\t_st.debug.log('adding Relay42 event logic to the window.dataLayer object failed due to : ' + e);\n\t}\n\t\n\ttry {\n    for (var i = 0; i < dl.length; i++) {\n        for (var prop in dl[i]) {\n            if (dl[i].hasOwnProperty(prop)) {\n                if (prop === 'event') {\n                    //Do something with historic events; _st.event.publish('gtmEvent', dataLayer[i][prop]);\n\t\t\t\t\tbreak;\n                } else {\n                    _st.data.setProperty(prop, dl[i][prop]);\n                    _st.debug.log(prop + ' : ' + dl[i][prop]);\n                }\n            }\n        }\n    }\n\t\t} catch(e) {\n\t\t_st.debug.log('adding the window.dataLayer object to the Relay42 datalayer failed due to : ' + e);\n\t}\n})();"},{"markerCondition":"[]","selector":"head","id":76,"version":69,"content":"_st.tracking.sendPageview();\n_st.tracking.syncPartner(0);"},{"execValue2":"login","markerCondition":"[]","selector":"head","id":206,"execValue":"/user","version":4,"content":"(function() {\n    dataLayer.push({'userEmailHash': '' + _st.data.getProperty('userEmailHash') + ''});\n})();\n        ","exec":"event"},{"execValue2":"checkoutidentification","markerCondition":"[]","selector":"head","id":207,"execValue":"/user","version":1,"content":"(function() {\n    dataLayer.push({'userEmailHash': '' + _st.data.getProperty('userEmailHash') + ''});\n})();\n        ","exec":"event"},{"markerCondition":"[]","selector":"head","id":221,"version":15,"content":"(function() {\n\n    var url = document.location.href;\n    var affiliate = document.location.host.replace('www.', '');\n    if (document.referrer.indexOf(affiliate) != -1) {\n        _st.debug.log('No session start');\n        return;\n    }\n\n    var type = '';\n    var params = {};\n\n    var ch = _st.util.getUrlParam('ch');\n\t\n\t//Classify visitors into traffic sources\n    if (_st.util.getUrlParam('ci') == 'meta') {\n        type = 'meta';\n    } else if (_st.util.getUrlParam('gclid') !== '') {\n        type = 'paidSearch';\n    } else if (_st.util.getUrlParam('utm_source=bing')) {\n        type = 'paidSearch';\n    } else if (document.referrer.indexOf('google.com') !== -1) {\n        type = 'organic';\n    } else if (document.referrer === '') {\n        type = 'direct';\n    }\n\n    var country = document.location.hostname.split('.')[2];\n\n    params.type = type;\n    params.country = country;\n    params.refurl = document.referrer;\n\t\n    if (ch) {\n        params.channel = ch;\n    }\n    params.affiliate = affiliate;\n    params.url = url;\n\n\t\n\t//set visitor type fact to distinguish between unknown (1 session) and known (>1 session)\n    _st.debug.log('Session start!');\n    var noSession = parseInt(_st.util.getCookie('noSession'),10);\n    if (!noSession) {\n\t\tnoSession = 1;\n        _st.util.setCookie('noSession', noSession, 730);\n        _st.tracking.sendExternalFact('visitorType', (60 * 60 * 24 * 30 * 24), {\n            type: 'unknown',\n            affiliate: affiliate\n        });\n    } else if (noSession == 1) {\n\t\tnoSession += 1;\n        _st.util.setCookie('noSession', noSession, 730);\n        _st.tracking.sendExternalFact('visitorType', (60 * 60 * 24 * 30 * 24), {\n            type: 'known',\n            affiliate: affiliate\n        });\n    } else if (noSession > 1) {\n\t\tnoSession += 1;\n        _st.util.setCookie('noSession', noSession, 730);\n    }\n\n    _st.data.setProperty('noSession', noSession);\n\t\n\tparams.nosession = noSession;\n\t\n\t_st.tracking.sendEngagement('trafficType', params);\n})();"},{"markerCondition":"[]","selector":"head","id":268,"version":6,"content":"(function(){\n\n\ttry {\n\t\tif (typeof(sessionStorage) !== \"undefined\") {\n\t\t\tif (sessionStorage.getItem('Scr6Engagement') !== 'true') {\n\t\t\t\tsessionStorage.setItem('Scr6Engagement','true');\n\t\t\t\tScr6Engagement();\n\t\t\t}\n\t\t} \n\t} catch(e) {}\n\t\n\tfunction Scr6Engagement() {\n\t\t\n\t\tvar callback = function(response){\n\t\t\tvar hash = response;\n\t\t\tvar UID = _st.tracking.getUserIdentifier();\n\t\t\tvar domain = document.location.hostname;\n\t\t\tvar useragent = navigator.userAgent;\n\n\t\t\tvar params = {\n\t\t\t\t\"hash\" : hash,\n\t\t\t\t\"UID\" : UID,\n\t\t\t\t\"domain\" : domain,\n\t\t\t\t\"useragent\" : useragent\n\t\t\t};\n\t\t\t_st.tracking.sendEngagement('Scr6', params);\n\t\t};\n\n\t\tfunction httpGetAsync(theUrl, callback){\n\n\t\t\tvar xmlHttp = new XMLHttpRequest();\n\n\t\t\txmlHttp.onreadystatechange = function() { \n\t\t\t\tif (xmlHttp.readyState == 4 && xmlHttp.status == 200){\n\t\t\t\t\tcallback(xmlHttp.responseText);\n\t\t\t\t}\n\t\t\t};\n\n\t\t\txmlHttp.open(\"GET\", theUrl, true); // true for asynchronous \n\t\t\txmlHttp.send(null);\n\t\t}\n\n\t\thttpGetAsync('https://generic.r42-apps.com/',callback);\n\t}\n})();"},{"execValue2":"newslettersubscription","markerCondition":"[]","selector":"head","id":205,"execValue":"/user","version":12,"content":"(function() {\n    dataLayer.push({'userEmailHash': '' + _st.data.getProperty('userEmailHash') + ''});\n})();","exec":"event"},{"execValue2":"login","markerCondition":"[]","selector":"head","id":77,"execValue":"/user","version":83,"content":"(function(){\n\tvar key = 2001;\n\tvar value = '' + _st.data.getProperty('userEmailHash') + '';\n\tif(typeof value !== 'undefined' && value !== '' && value !== 'undefined' && !!value) {\n\t\t_st.tracking.storeMapping(key,value,1);\n\t\t//clang hashed email\n\t\t_st.tracking.storeMapping(1012,value);\n\n\t\tvar params = {};\n\t\tparams['recognitionType'] = 'login';\n\t\tparams['UUID'] = value;\n\t\tparams['affiliate'] = '' + _st.data.getProperty('affiliate') + '';\n\t\tparams['R42deviceId'] = _st.tracking.getUserIdentifier();\n\t\t_st.tracking.sendEngagement('userRecognition',params);\t\t\t\n\t} else {\n\t\tthrow 'Storemapping value contains no correct value : ' + value;\n\t}\n})();","exec":"event"},{"execValue2":"login","markerCondition":"[]","selector":"head","id":94,"execValue":"/user","version":71,"content":"(function(){\n\tvar key = 7001;\n\tvar value = '' + _st.data.getProperty('userEmailHash') + '';\n\tif(typeof value !== 'undefined' && value !== '' && value !== 'undefined' && !!value) {\n\t\t_st.tracking.storeMapping(key,value,1);\n\t} else {\n\t\tthrow 'Storemapping value contains no correct value : ' + value;\n\t}\n})();","exec":"event"},{"execValue2":"checkoutidentification","markerCondition":"[]","selector":"head","id":99,"execValue":"/user","version":74,"content":"(function(){\n\tvar key = 2001;\n\tvar value = '' + _st.data.getProperty('userEmailHash') + '';\n\tif(typeof value !== 'undefined' && value !== '' && value !== 'undefined' && !!value) {\n\t\t_st.tracking.storeMapping(key,value,1);\n\t\t//clang hashed email\n\t\t_st.tracking.storeMapping(1012,value);\n\t\t\n\t\tvar params = {};\n\t\tparams['recognitionType'] = 'checkoutIdentification';\n\t\tparams['UUID'] = value;\n\t\tparams['affiliate'] = '' + _st.data.getProperty('affiliate') + '';\n\t\tparams['R42deviceId'] = _st.tracking.getUserIdentifier();\n\t\t_st.tracking.sendEngagement('userRecognition',params);\t\n\t\t\n\t} else {\n\t\tthrow 'Storemapping value contains no correct value : ' + value;\n\t}\n})();","exec":"event"},{"execValue2":"checkoutidentification","markerCondition":"[]","selector":"head","id":110,"execValue":"/user","version":61,"content":"(function(){\n\tvar key = 7001;\n\tvar value = '' + _st.data.getProperty('userEmailHash') + '';\n\tif(typeof value !== 'undefined' && value !== '' && value !== 'undefined' && !!value) {\n\t\t_st.tracking.storeMapping(key,value,1);\n\t\t\t\n\t} else {\n\t\tthrow 'Storemapping value contains no correct value : ' + value;\n\t}\n})();","exec":"event"},{"execValue2":"newslettersubscription","markerCondition":"[]","selector":"head","id":111,"execValue":"/user","version":74,"content":"(function(){\n\tvar key = 2001;\n\tvar value = '' + _st.data.getProperty('userEmailHash') + '';\n\tif(typeof value !== 'undefined' && value !== '' && value !== 'undefined' && !!value) {\n\t\t_st.tracking.storeMapping(key,value,1);\n\t\t//clang hashed email\n\t\t_st.tracking.storeMapping(1012,value);\n\t\t\n\t\tvar params = {};\n\t\tparams['recognitionType'] = 'newsletterSubscription';\n\t\tparams['UUID'] = value;\n\t\tparams['affiliate'] = '' + _st.data.getProperty('affiliate') + '';\n\t\tparams['R42deviceId'] = _st.tracking.getUserIdentifier();\n\t\t_st.tracking.sendEngagement('userRecognition',params);\t\n\t} else {\n\t\tthrow 'Storemapping value contains no correct value : ' + value;\n\t}\n})();","exec":"event"},{"execValue2":"newslettersubscription","markerCondition":"[]","selector":"head","id":112,"execValue":"/user","version":63,"content":"(function(){\n\tvar key = 7001;\n\tvar value = '' + _st.data.getProperty('userEmailHash') + '';\n\tif(typeof value !== 'undefined' && value !== '' && value !== 'undefined' && !!value) {\n\t\t_st.tracking.storeMapping(key,value,1);\n\t\t\t\t\n\t} else {\n\t\tthrow 'Storemapping value contains no correct value : ' + value;\n\t}\n})();","exec":"event"}],"experiments":[{"id":113,"groups":[{"id":114,"weight":1},{"id":115,"weight":1}]},{"id":145,"groups":[{"id":146,"weight":1},{"id":147,"weight":1},{"id":148,"weight":1}]},{"id":116,"groups":[{"id":117,"weight":1},{"id":118,"weight":1},{"id":119,"weight":1}]},{"id":149,"groups":[{"id":150,"weight":1},{"id":151,"weight":1},{"id":152,"weight":1}]},{"id":120,"groups":[{"id":121,"weight":75},{"id":122,"weight":25}]},{"id":153,"groups":[{"id":154,"weight":1},{"id":155,"weight":1},{"id":156,"weight":1}]},{"id":123,"groups":[{"id":124,"weight":1},{"id":125,"weight":1}]},{"id":171,"groups":[{"id":172,"weight":13},{"id":173,"weight":1},{"id":174,"weight":1},{"id":175,"weight":1},{"id":176,"weight":1},{"id":177,"weight":1}]},{"id":142,"groups":[{"id":143,"weight":1},{"id":144,"weight":1}]}],"dataCollectionRate":500});